<!DOCTYPE html>
<html lang="en-us" dir="ltr" id="developer-mozilla-org">
<!-- Mirrored from developer.mozilla.org/en/DOM/element.addEventListener by HTTrack Website Copier/3.x [XR&CO'2010], Fri, 17 Dec 2010 12:15:23 GMT --><!-- Added by HTTrack --><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<!-- /Added by HTTrack --><title>element.addEventListener - MDC Doc Center</title>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="MSSmartTagsPreventParsing" content="true">
<meta name="ROBOTS" content="ALL">
<meta name="Copyright" content="Copyright (c) 2005-2010 Mozilla.">
<meta name="Rating" content="General">
<link rel="home" href="https://developer.mozilla.org/">
<link rel="copyright" href="#copyright">
<meta name="robots" content="index,follow">
<link rel="shortcut icon" href="../../favicon.ico">
<link rel="alternate" type="application/rss+xml" title="What's new feed" href="https://developer.mozilla.org/index.php?title=Special:Recentchanges&amp;feed=rss">
<link rel="alternate" type="application/rss+xml" title="Page and subpages changes feed" href="https://developer.mozilla.org/index.php?title=Special:Article&amp;type=feed&amp;feedtype=subpagechanges&amp;pageid=20966">
<link rel="alternate" type="application/rss+xml" title="Page changes feed" href="https://developer.mozilla.org/index.php?title=Special:Article&amp;type=feed&amp;pageid=20966">
<meta name="generator" content="MindTouch  9.12.3">
<link rel="search" type="application/opensearchdescription+xml" title="MDC Search" href="https://developer.mozilla.org/deki/gui/opensearch.php?type=description">
<link rel="stylesheet" type="text/css" media="screen" href="../../skins/common/css.css">
<!--[if IE 7]><style type="text/css">@import "/skins/common/_ie7.css";</style><![endif]--><!--[if IE 6]><style type="text/css">@import "/skins/common/_ie.css";</style><![endif]--><link rel="stylesheet" type="text/css" media="print" href="../../skins/common/print.css">
<link rel="stylesheet" type="text/css" media="screen,projection" href="../../skins/mdn/Transitional/css.css">
<!--[if lte IE 7]><link rel="stylesheet" type="text/css" media="all" href="/skins/mdn/Transitional/ie7.css"><![endif]--><!--[if lte IE 6]><link rel="stylesheet" type="text/css" media="all" href="/skins/mdn/Transitional/ie6.css"><![endif]--><link rel="stylesheet" type="text/css" media="print" href="../../skins/mdn/Transitional/print.css">
<script type="text/javascript" src="../../skins/common/js188f.php?perms=LOGIN,BROWSE,READ,SUBSCRIBE"></script><script type="text/javascript">var _starttime = new Date().getTime();</script><!--[if IE]>
<meta http-equiv="imagetoolbar" content="no">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--><script type="text/javascript">

		Deki.BaseHref = 'https://developer.mozilla.org/';
Deki.PageId = 20966;
Deki.PageTitle = 'en/DOM/element.addEventListener';
Deki.PathTpl = '/skins/mdn';
Deki.PathSkin = '/skins/mdn/Transitional';
Deki.PathCommon = '/skins/common';
Deki.UserName = 'Anonymous';
Deki.Today = '17 Dec 2010';
Deki.EditorStyles = [];
Deki.EditorStyles.push('../../skins/mdn/_editor.css');
Deki.EditorStyles.push('../../skins/mdn/Transitional/_content.css');
Deki.EditorStyles.push('../../skins/common/custom_css.css');

		window.onbeforeunload = function() {
			if ( Deki.Editor && Deki.Editor.IsChanged() ) {
				return "You have made changes to the content without saving your changes. Are you sure you want to exit this page?";
			}
		};

		var aLt = new Array();aLt["attach-no-description"] = 'No description'; aLt["cancel"] = 'Cancel'; aLt["close"] = 'Close'; aLt["comment-delete"] = 'Are you sure you want to delete this comment?'; aLt["error"] = 'Error'; aLt["gallery-close"] = 'close'; aLt["gallery-next"] = 'next'; aLt["gallery-prev"] = 'prev'; aLt["internal-error"] = 'Sorry, but there was an internal problem - please try again soon.'; aLt["js-label_cancel"] = 'Cancel'; aLt["js-label_save"] = 'Save'; aLt["js-tooltip_cancel"] = 'Exit Without Saving Changes'; aLt["js-tooltip_save"] = 'Save and Exit (Alt+S)'; aLt["ldap-provide-credentials"] = 'Please provide external service login credentials.'; aLt["loading"] = 'Loading...'; aLt["menu-confirm-delete"] = 'Are you sure you want to delete this file?'; aLt["menu-delete-file"] = 'Delete'; aLt["menu-edit-description"] = 'Edit description'; aLt["menu-move-file"] = 'Move'; aLt["menu-previous-versions"] = 'Previous versions'; aLt["menu-view-original"] = 'View original'; aLt["print-end-notes"] = 'Endnotes'; aLt["ready"] = 'Ready'; aLt["remove-tag"] = 'Remove tag'; aLt["restore-tag"] = 'Restore tag'; aLt["save"] = 'Save'; aLt["submit"] = 'Submit'; aLt["wikibits-attach-another"] = 'Attach another file'; aLt["wikibits-attach-file"] = 'Attach File'; aLt["wikibits-cant-attach-editing"] = 'Sorry, you can\'t attach files while editing a page. Please close the editor first.'; aLt["wikibits-edit-section"] = 'Edit section'; aLt["wikibits-remove-file"] = 'Remove file';  var wfMsg = function (key) { return aLt[key] ? aLt[key] : 'MISSING: ' + key; };
	//hook in menu clicking events to the document's body
	YAHOO.util.Event.addListener(document, "click", function () { DWMenu.BodyClick(); });
	YAHOO.util.Event.onDOMReady(function () { new clientWindow });

			

			YAHOO.util.Event.onDOMReady(function() {
			tb_init("a.lightbox, area.lightbox, input.lightbox, a[rel='awesomebox']");//pass where to apply thickbox
			imgLoader = new Image();// preload image
			imgLoader.src = tb_pathToImage;
		});

		YAHOO.util.Event.onDOMReady(function() {
			MTComments.HookBehavior();
		});
		</script><link type="text/css" rel="stylesheet" href="../../deki/scripts/res/syntax/SyntaxHighlighter.css">
<script type="text/javascript" src="../../deki/scripts/res/syntax/shCore.js"></script><script type="text/javascript" src="../../deki/scripts/res/syntax/shBrushJScript.js"></script><script type="text/javascript" src="../../deki/scripts/res/syntax/shBrushXml.js"></script><link href="../../skins/common/custom_css.css" rel="stylesheet" type="text/css">
</head>
<div class="wrap">
  <div id="content-main" class="full">

    
        
    <article class="article PageDW-enDOMelementaddEventListener" role="main"><div class="page-title hideforedit">
            
              <h1 class="first" id="title">element.addEventListener</h1>      
              </div>
      
    <div class="page-content boxed">

     
      
    
            
      <div id="page-top">
<div id="pageToc"><div class="pageToc">
<h5>Table of contents</h5>
<ol style="list-style-type:none; margin-left:0px; padding-left:0px;">
<li>
<span>1.</span> <a href="#Summary" rel="internal">Summary</a>
</li>
<li>
<span>2.</span> <a href="#Syntax" rel="internal">Syntax</a>
</li>
<li>
<span>3.</span> <a href="#Example" rel="internal">Example</a>
</li>
<li>
<span>4.</span> <a href="#Notes" rel="internal">Notes</a><ol style="list-style-type:none; margin-left:0px; padding-left:15px;">
<li>
<span>4.1.</span> <a href="#Why_use_addEventListener.3f" rel="internal">Why use addEventListener?</a>
</li>
<li>
<span>4.2.</span> <a href="#Adding_a_listener_during_event_dispatch" rel="internal">Adding a listener during event dispatch</a>
</li>
<li>
<span>4.3.</span> <a href="#Multiple_identical_event_listeners" rel="internal">Multiple identical event listeners</a>
</li>
<li>
<span>4.4.</span> <a href="#The_value_of_this_within_the_handler" rel="internal">The value of this within the handler</a>
</li>
<li>
<span>4.5.</span> <a href="#Internet_Explorer" rel="internal">Internet Explorer</a>
</li>
<li>
<span>4.6.</span> <a href="#Older_way_to_register_event_listeners" rel="internal">Older way to register event listeners</a>
</li>
<li>
<span>4.7.</span> <a href="#Memory_issues" rel="internal">Memory issues</a>
</li>
</ol>
</li>
<li>
<span>5.</span> <a href="#Specification" rel="internal">Specification</a>
</li>
</ol>
</div></div>
<div class="pageText" id="pageText">
<p><span class="lang lang-en">« <a rel="internal" href="../Gecko_DOM_Reference.html">Gecko DOM Reference</a> </span></p>
<div id="section_1">
<span id="Summary"></span><h3 class="editable">Summary</h3>
<p><code>addEventListener</code> registers a single event listener on a single target. The event target may be a single node in a document, the <a rel="internal" href="document.html">document</a> itself, a <a rel="internal" href="window.html">window</a>, or an <a rel="internal" href="https://developer.mozilla.org/en/XMLHttpRequest">XMLHttpRequest</a>.</p>
<p>To register more than one event listeners for the target, call addEventListener for the same target but with different event types or capture parameters.</p>
</div>
<div id="section_2">
<span id="Syntax"></span><h3 class="editable">Syntax</h3>
<pre class="eval"><code><em>target</em>.addEventListener(<em>type</em>, <em>listener</em>, <em>useCapture</em>);</code>
<code><em>target</em>.addEventListener(<em>type</em>, <em>listener</em>, <em>useCapture</em> [,</code> <code><em>aWantsUntrusted </em></code><span class="lang lang-en"><span class="nonStandardInlineTemplate" style="border: 1px solid rgb(255, 213, 153); background-color: rgb(255, 239, 217); font-size: x-small; white-space: nowrap; padding: 2px;">Non-standard</span></span>     <code><em>]</em> );</code> // Mozilla only
</pre>
<dl>
<dt>type </dt> <dd>A string representing the <a class="internal" rel="internal" href="event-30.html">event type</a> to listen for.</dd> <dt>listener </dt> <dd>The object that receives a notification when an event of the specified type occurs. This must be an object implementing the <a class="external" rel="external nofollow" href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventListener" title="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventListener" target="_blank"><code>EventListener</code></a> interface, or simply a JavaScript <a rel="internal" href="https://developer.mozilla.org/en/JavaScript/Guide/Functions">function</a>.</dd> <dt>useCapture </dt> <dd>If <code>true</code>, <code>useCapture</code> indicates that the user wishes to initiate capture. After initiating capture, all events of the specified type will be dispatched to the registered <code>listener</code> before being dispatched to any <code>EventTarget</code>s beneath it in the DOM tree. Events which are bubbling upward through the tree will not trigger a listener designated to use capture. See <a title="http://www.w3.org/TR/DOM-Level-3-Events/#event-flow" class="external" rel="external nofollow" href="http://www.w3.org/TR/DOM-Level-3-Events/#event-flow" target="_blank">DOM Level 3 Events</a> for a detailed explanation.</dd> <dt>aWantsUntrusted <span class="lang lang-en"><span class="nonStandardInlineTemplate" style="border: 1px solid rgb(255, 213, 153); background-color: rgb(255, 239, 217); font-size: x-small; white-space: nowrap; padding: 2px;">Non-standard</span></span>     </dt> <dd>If <code>true</code>, the event can be triggered by untrusted content. See <a rel="internal" href="https://developer.mozilla.org/en/Code_snippets/Interaction_between_privileged_and_non-privileged_pages">Interaction between privileged and non-privileged pages</a>.</dd> <dt></dt>
</dl>
</div>
<div id="section_3">
<span id="Example"></span><h3 class="editable">Example</h3>

          <pre name="code" class="js">&lt;html&gt;
 &lt;head&gt;
   &lt;title&gt;DOM Event Example&lt;/title&gt;
   &lt;style type="text/css"&gt;
     #t { border: 1px solid red }
     #t1 { background-color: pink; }
   &lt;/style&gt;
   &lt;script type="text/javascript"&gt;

   // Function to change the content of t2
   function modifyText() {
     var t2 = document.getElementById("t2");
     t2.firstChild.nodeValue = "three";    
   }
 
   // Function to add event listener to t
   function load() { 
     var el = document.getElementById("t"); 
     el.addEventListener("click", modifyText, false); 
   } 

   &lt;/script&gt; 
 &lt;/head&gt; 
 &lt;body onload="load();"&gt; 
 &lt;table id="t"&gt; 
   &lt;tr&gt;&lt;td id="t1"&gt;one&lt;/td&gt;&lt;/tr&gt; 
   &lt;tr&gt;&lt;td id="t2"&gt;two&lt;/td&gt;&lt;/tr&gt; 
 &lt;/table&gt; 
 &lt;/body&gt; 
 &lt;/html&gt;</pre>
        
<p>In the above example, <code>modifyText()</code> is a listener for <code>click</code> events registered using <code>addEventListener()</code>. A click anywhere on the table will bubble up to the handler and run <code>modifyText()</code>.</p>
<p>If you want to pass parameters to the listener function, you have to use an anonymous function.</p>
<pre class="deki-transform">
 &lt;html&gt;
 &lt;head&gt;
   &lt;title&gt;DOM Event Example&lt;/title&gt;
   &lt;style type="text/css"&gt;
     #t { border: 1px solid red }
     #t1 { background-color: pink; }
   &lt;/style&gt;
   &lt;script type="text/javascript"&gt;

   // Function to change the content of t2
   function modifyText(new_text) {
     var t2 = document.getElementById("t2");
     t2.firstChild.nodeValue = new_text;    
   }
 
   // Function to add event listener to t
   function load() { 
     var el = document.getElementById("t"); 
     el.addEventListener("click", <strong><strong>function(){modifyText("four")}</strong></strong>, false); 
   } 

   &lt;/script&gt; 
 &lt;/head&gt; 
 &lt;body onload="load();"&gt; 
 &lt;table id="t"&gt; 
   &lt;tr&gt;&lt;td id="t1"&gt;one&lt;/td&gt;&lt;/tr&gt; 
   &lt;tr&gt;&lt;td id="t2"&gt;two&lt;/td&gt;&lt;/tr&gt; 
 &lt;/table&gt; 
 &lt;/body&gt; 
 &lt;/html&gt; 
</pre>
</div>
<div id="section_4">
<span id="Notes"></span><h3 class="editable">Notes</h3>
<div id="section_5">
<span id="Why_use_addEventListener.3F"></span><span id="Why_use_addEventListener.3f"></span><h4 class="editable">Why use <code>addEventListener</code>?</h4>
<p><code>addEventListener</code> is the way to register an event listener as specified in W3C DOM. Its benefits are as follows:</p>
<ul>
<li>It allows adding more than a single handler for an event. This is particularly useful for <a rel="internal" href="https://developer.mozilla.org/en/DHTML">DHTML</a> libraries or <a rel="internal" href="https://developer.mozilla.org/en/Extensions">Mozilla extensions</a> that need to work well even if other libraries/extensions are used.</li> <li>It gives you finer-grained control of the phase when the listener gets activated (capturing vs. bubbling)</li> <li>It works on any DOM element, not just HTML elements.</li>
</ul>
<p>The alternative, <a href="#Older_way_to_register_event_listeners">older way to register event listeners</a> is described below.</p>
</div>
<div id="section_6">
<span id="Adding_a_listener_during_event_dispatch"></span><h4 class="editable">Adding a listener during event dispatch</h4>
<p>If an <code>EventListener</code> is added to an <code>EventTarget</code> while it is processing an event, it will not be triggered by the current actions but may be triggered during a later stage of event flow, such as the bubbling phase.</p>
</div>
<div id="section_7">
<span id="Multiple_identical_event_listeners"></span><h4 class="editable">Multiple identical event listeners</h4>
<p>If multiple identical <code>EventListener</code>s are registered on the same <code>EventTarget</code> with the same parameters, the duplicate instances are discarded. They do not cause the <code>EventListener</code> to be called twice, and since the duplicates are discarded, they do not need to be removed manually with the <a rel="internal" href="element-58.html">removeEventListener</a> method.</p>
</div>
<div id="section_8">
<span id="The_value_of_this_within_the_handler"></span><h4 class="editable">The value of <code>this</code> within the handler</h4>
<p>It is often desirable to reference the element from which the event handler was fired, such as when using a generic handler for a series of similar elements. When attaching a function using <code>addEventListener()</code> the value of <code>this</code> is changed—note that the value of <code>this</code> is passed to a function from the caller.</p>
<p>In the example above, the value of <code>this</code> within <code>modifyText()</code> when called from the click event is a reference to the table 't'. This is in contrast to the behavior that occurs if the handler is added in the HTML source:</p>

          <pre name="code" class="xml">&lt;table id="t" onclick="modifyText();"&gt;
. . .</pre>
        
<p>The value of <code>this</code> within <code>modifyText()</code> when called from the onclick event will be a reference to the global (window) object.</p>
<div class="note">
<strong>Note:</strong> JavaScript 1.8.5 introduces the <code><a rel="internal" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind">Function.prototype.bind()</a></code> method, which lets you specify the value that should be used as <code>this</code> for all calls to a given function. This lets you easily bypass problems where it's unclear what this will be, depending on the context from which your function was called. Note, however, that you'll need to keep a reference to the listener around so you can later remove it.</div>
</div>
<div id="section_9">
<span id="Internet_Explorer"></span><h4 class="editable">Internet Explorer</h4>
<p>In Internet Explorer versions prior to IE 9, you have to use <code><a class="external" rel="external nofollow" href="http://msdn.microsoft.com/en-us/library/ms536343(VS.85).aspx" title="http://msdn.microsoft.com/en-us/library/ms536343(VS.85).aspx" target="_blank">attachEvent</a></code> rather than the standard <code>addEventListener</code>. To support IE, the example above can be modified to:</p>

          <pre name="code" class="js">if (el.addEventListener){
  el.addEventListener('click', modifyText, false); 
} else if (el.attachEvent){
  el.attachEvent('onclick', modifyText);
}</pre>
        
<p>There is a drawback to <code>attachEvent</code>, the value of <code>this</code> will be a reference to the <code>window</code> object instead of the element on which it was fired.</p>
</div>
<div id="section_10">
<span id="Older_way_to_register_event_listeners"></span><h4 class="editable">Older way to register event listeners</h4>
<p><code>addEventListener()</code> was introduced with the DOM 2 <a class="external" rel="external nofollow" href="http://www.w3.org/TR/DOM-Level-2-Events" title="http://www.w3.org/TR/DOM-Level-2-Events" target="_blank">Events</a> specification. Before then, event listeners were registered as follows:</p>

          <pre name="code" class="js">// Using a function reference—note lack of '()'
el.onclick = modifyText;

// Using a function expression
element.onclick = function(){
                    ...statements...
                  };</pre>
        
<p>This method replaces the existing <code>click</code> event listener(s) on the element if there are any. Similarly for other events and associated event handlers such as <code>blur</code> (<code>onblur</code>), <code>keypress</code> (<code>onkeypress</code>), and so on.</p>
<p>Because it was essentially part of DOM 0, this method is very widely supported and requires no special cross–browser code; hence it is normally used to register event listeners dynamically unless the extra features of <code>addEventListener()</code> are needed.</p>
</div>
<div id="section_11">
<span id="Memory_issues"></span><h4 class="editable">Memory issues</h4>
<p> </p>

          <pre name="code" class="js">document.addEventListener("load", function(event) { obj.func(event); }, false);</pre>
        
<p>Calling <code>addEventListener</code> to an anonymous function creates a new listener each time<span>.</span> Calling <code>removeEventListener</code> to an anonymous function has no effect. An anonymous function creates a unique object each time is is called, it is not a reference to an existing object though it may call one. When adding an event listener in this manner be sure it is added only once, it is permanent (can not be removed) untill the object it was added to is destroyed.</p>
</div>
</div>
<div id="section_12">
<span id="Specification"></span><h3 class="editable">Specification</h3>
<p><a class="external" rel="external nofollow" href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget-addEventListener" title="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget-addEventListener" target="_blank">DOM Level 2 Events: addEventListener</a></p>
<p></p>
</div>
</div>
</div>
<div class="printfooter" id="printfooter">
<hr>
<p>Retrieved from "<a href="element-7.html">https://developer.mozilla.org/en/DOM/element.addEventListener</a>"</p>
</div>

            </div>

    </article>

  </div>
<!-- /#content-main -->

</div>
<!-- /.wrap -->
<!-- Mirrored from developer.mozilla.org/en/DOM/element.addEventListener by HTTrack Website Copier/3.x [XR&CO'2010], Fri, 17 Dec 2010 12:15:23 GMT --><!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8">
<!-- /Added by HTTrack -->
</html>
